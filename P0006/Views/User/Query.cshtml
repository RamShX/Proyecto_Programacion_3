@model List<P0006.Models.ViewModels.QueryViewModels>
@{
    ViewBag.Title = "Consulta Usuario";
    Layout = "~/Views/Shared/_LayoutApp.cshtml";
}

<h2>Consulta</h2>

<div class="row">
    <br />
    <div class="col-md-12">
        <input type="button" value="Nuevo" class="btn btn-primary btn-lg"
               onclick="document.location.href='@Url.Content("~/User/Add")'"/>


        <input type="button" value="Volver Atras" class="btn btn-info btn-lg"
               onclick="document.location.href='@Url.Content("~/")'" />
    </div>
    <br />
    <br />

    <div class="col-lg-12">
        <table class="table table-bordered">
            <tr>
                <th style="background-color: aquamarine; color: white"> ID</th>
                <th style="background-color: aquamarine; color: white"> Correo</th>
                <th style="background-color: aquamarine; color: white"> Edad</th>
                <th style="background-color: aquamarine; color: white"> Acción</th>
            </tr>

            @foreach(var obj in Model)
            {
                <tr>
                    <td>@obj.Id</td>
                    <td>@obj._Email</td>
                    <td>@obj._Edad</td>
                    <td>
                        <input type="button"
                               class="btn btn-danger btn-lg"
                               onclick="jsDelete(@obj.Id)"
                               value="Borrar" />

                        <input type="button"
                               class="btn btn-dafault btn-lg"
                               onclick="document.location.href = '@Url.Content("~/User/Edit/")' + @obj.Id"
                               value="Editar" />
                    </td>


                </tr>
            }
        </table>
    </div>
</div>

<script>
    function jsDelete(ID) {
        if (confirm("Está seguro de borrar el dato")) {
            url = "@Url.Content("~/User/Delete")" + "/" + ID;

            $.post(url, function (data) {
                if (data == 1) {
                    document.location.href = "@Url.Content("~/user/Query")";
                    alert("Eliminado correctamente");

                }
                else {
                    alert("Error al eliminar");
                }
            });
        }
    }
</script>